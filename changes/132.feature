Optimize location_changed (@bdraco)
